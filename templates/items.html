{% extends "base.html" %}
{% block content %}
<div class="card">
  <form method="get">
    <input type="text" name="search" placeholder="Search" value="{{ filters.search or '' }}" />
    <input type="text" name="tags" placeholder="Tags" value="{{ filters.tags or '' }}" />
    <select name="source">
      <option value="">All sources</option>
      <option value="x">X</option>
      <option value="youtube">YouTube</option>
      <option value="web">Web</option>
      <option value="rss">RSS</option>
    </select>
    <input type="number" step="0.1" name="min_score" placeholder="Min score" />
    <button type="submit">Filter</button>
  </form>
</div>
<div class="card">
  <form method="post" action="/reports/generate">
    <label>Generate report (last days):</label>
    <input type="number" name="days" value="7" />
    <button type="submit">Generate</button>
  </form>
</div>
{% for item in items %}
  <div class="card">
    <h3><a href="/items/{{ item.id }}">{{ item.title }}</a></h3>
    <div>{{ item.source_type }} | {{ item.author }} | {{ item.published_at }}</div>
    <div>
      {% for tag in (item.tags or '').split(',') if tag %}
        <span class="tag">{{ tag }}</span>
      {% endfor %}
    </div>
    <p>{{ item.excerpt }}</p>
  </div>
{% endfor %}
{% endblock %}
